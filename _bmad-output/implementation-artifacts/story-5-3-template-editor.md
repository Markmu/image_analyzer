# Story 5.3: template-editor

Status: ready-for-dev

<!-- Note: Validation is optional. Run validate-create-story for quality check before dev-story. -->

## Story

As a åˆ›ä½œè€…
I want ä½¿ç”¨åŠŸèƒ½ä¸°å¯Œçš„å¯è§†åŒ–ç¼–è¾‘å™¨æ¥ç¼–è¾‘å’Œä¼˜åŒ–ç”Ÿæˆçš„æç¤ºè¯æ¨¡ç‰ˆ
so that æˆ‘å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸ªæ¨¡ç‰ˆå­—æ®µï¼Œå®æ—¶é¢„è§ˆæ•ˆæœï¼Œå¹¶åˆ›å»ºé«˜è´¨é‡çš„åŒé£æ ¼å›¾ç‰‡

## Acceptance Criteria

1. **AC1:** ç³»ç»Ÿæä¾›å®Œæ•´çš„æ¨¡ç‰ˆç¼–è¾‘å™¨ç•Œé¢ï¼Œæ”¯æŒç¼–è¾‘æ‰€æœ‰ 6 ä¸ªæ ¸å¿ƒå­—æ®µï¼š
   - Subjectï¼ˆä¸»ä½“æè¿°ï¼‰
   - Styleï¼ˆé£æ ¼æè¿°ï¼‰
   - Compositionï¼ˆæ„å›¾ä¿¡æ¯ï¼‰
   - Colorsï¼ˆè‰²å½©æ–¹æ¡ˆï¼‰
   - Lightingï¼ˆå…‰çº¿è®¾ç½®ï¼‰
   - Additionalï¼ˆå…¶ä»–ç»†èŠ‚ï¼‰

2. **AC2:** ç¼–è¾‘å™¨æ”¯æŒå®æ—¶é¢„è§ˆåŠŸèƒ½ï¼š
   - ç”¨æˆ·ç¼–è¾‘å­—æ®µæ—¶ï¼Œå®æ—¶æ˜¾ç¤ºå®Œæ•´çš„æç¤ºè¯é¢„è§ˆ
   - é¢„è§ˆåŒºåŸŸä½¿ç”¨ç­‰å®½å­—ä½“ï¼ˆJetBrains Monoï¼‰
   - é¢„è§ˆå†…å®¹åŒæ­¥æ›´æ–°ï¼ˆæ— å»¶è¿Ÿï¼‰

3. **AC3:** ç¼–è¾‘å™¨æä¾›æ™ºèƒ½è¾…åŠ©åŠŸèƒ½ï¼š
   - æ¯ä¸ªå­—æ®µæ˜¾ç¤ºå ä½ç¬¦ç¤ºä¾‹
   - æä¾›å¸¸ç”¨æœ¯è¯­å’Œå…³é”®è¯å»ºè®®
   - æ”¯æŒå¿«é€Ÿæ’å…¥é¢„è®¾å€¼ï¼ˆä¸‹æ‹‰èœå•æˆ–æ ‡ç­¾ï¼‰

4. **AC4:** ç¼–è¾‘å™¨é›†æˆç°æœ‰åŠŸèƒ½ï¼š
   - å¤åˆ¶æŒ‰é’®ï¼ˆå¤ç”¨ Story 5.1 çš„ `CopyButton`ï¼‰
   - å¯¼å‡ºæŒ‰é’®ï¼ˆå¤ç”¨ Story 5.2 çš„ `ExportButton`ï¼‰
   - ä¿å­˜åˆ°æ¨¡ç‰ˆåº“æŒ‰é’®ï¼ˆè¿æ¥åˆ° Story 5.4ï¼‰

5. **AC5:** ç¼–è¾‘å™¨éµå¾ª UX è®¾è®¡è§„èŒƒï¼š
   - ä½¿ç”¨ Glassmorphism å¡ç‰‡æ ·å¼ï¼ˆ`ia-glass-card`ï¼‰
   - ä½¿ç”¨ Lucide å›¾æ ‡ï¼ˆEdit, Eye, Copy, Download ç­‰ï¼‰
   - æ”¯æŒå±•å¼€/æ”¶èµ·é¢„è§ˆåŒºåŸŸï¼ˆ300ms åŠ¨ç”»ï¼‰

6. **AC6:** ç¼–è¾‘å™¨æ”¯æŒå†å²è®°å½•åŠŸèƒ½ï¼š
   - è‡ªåŠ¨ä¿å­˜æœ€è¿‘ 10 æ¬¡ç¼–è¾‘ç‰ˆæœ¬
   - æ”¯æŒæ’¤é”€/é‡åšæ“ä½œï¼ˆCtrl/Cmd + Z, Ctrl/Cmd + Shift + Zï¼‰
   - æ˜¾ç¤ºç‰ˆæœ¬å†å²æ—¶é—´æˆ³

7. **AC7:** ç¼–è¾‘å™¨æä¾›éªŒè¯å’Œè´¨é‡æ£€æŸ¥ï¼š
   - æ£€æŸ¥å¿…å¡«å­—æ®µï¼ˆSubject, Styleï¼‰
   - æç¤ºå­—ç¬¦æ•°é™åˆ¶ï¼ˆæ¯ä¸ªå­—æ®µï¼‰
   - æ£€æµ‹å¸¸è§é”™è¯¯ï¼ˆé‡å¤è¯æ±‡ã€ç©ºå­—æ®µï¼‰

8. **AC8:** ç¼–è¾‘å™¨æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯ï¼š
   - æ¡Œé¢ç«¯ï¼šä¸‰åˆ—å¸ƒå±€ï¼ˆå­—æ®µç¼–è¾‘ | é¢„è§ˆ | æ“ä½œæŒ‰é’®ï¼‰
   - å¹³æ¿ç«¯ï¼šä¸¤åˆ—å¸ƒå±€
   - ç§»åŠ¨ç«¯ï¼šå•åˆ—å¸ƒå±€ï¼Œå¯æŠ˜å å­—æ®µ

## Tasks / Subtasks

- [ ] **Task 1: åˆ›å»ºç¼–è¾‘å™¨æ•°æ®ç»“æ„å’ŒçŠ¶æ€ç®¡ç†** (AC: 1, 6)
  - [ ] 1.1 å®šä¹‰ `TemplateEditorState` æ¥å£ï¼ˆå­—æ®µå€¼ã€å†å²è®°å½•ã€å½“å‰ç´¢å¼•ï¼‰
  - [ ] 1.2 å®šä¹‰ `TemplateField` é…ç½®ï¼ˆæ ‡ç­¾ã€å ä½ç¬¦ã€éªŒè¯è§„åˆ™ï¼‰
  - [ ] 1.3 å®ç°å†å²è®°å½•ç®¡ç†é€»è¾‘ï¼ˆæ’¤é”€/é‡åšæ ˆï¼‰
  - [ ] 1.4 åˆ›å»º Zustand storeï¼ˆ`useTemplateEditorStore`ï¼‰

- [ ] **Task 2: å®ç°æ ¸å¿ƒç¼–è¾‘å™¨ç»„ä»¶** (AC: 1, 3, 7)
  - [ ] 2.1 åˆ›å»º `TemplateEditor` ä¸»ç»„ä»¶
  - [ ] 2.2 åˆ›å»º `FieldEditor` å­ç»„ä»¶ï¼ˆæ¯ä¸ªå­—æ®µä¸€ä¸ªï¼‰
  - [ ] 2.3 å®ç°å­—æ®µå ä½ç¬¦å’Œç¤ºä¾‹æç¤º
  - [ ] 2.4 å®ç°æ™ºèƒ½å»ºè®®åŠŸèƒ½ï¼ˆå…³é”®è¯æ ‡ç­¾ï¼‰
  - [ ] 2.5 å®ç°å­—æ®µéªŒè¯é€»è¾‘

- [ ] **Task 3: å®ç°é¢„è§ˆåŠŸèƒ½** (AC: 2)
  - [ ] 3.1 åˆ›å»º `TemplatePreview` ç»„ä»¶
  - [ ] 3.2 å®ç°å®æ—¶é¢„è§ˆæ›´æ–°ï¼ˆå“åº”å­—æ®µå˜åŒ–ï¼‰
  - [ ] 3.3 åº”ç”¨ JetBrains Mono å­—ä½“æ ·å¼
  - [ ] 3.4 å®ç°é¢„è§ˆåŒºåŸŸå±•å¼€/æ”¶èµ·åŠŸèƒ½

- [ ] **Task 4: å®ç°å†å²è®°å½•å’Œæ’¤é”€/é‡åš** (AC: 6)
  - [ ] 4.1 å®ç°å†å²è®°å½•æ ˆï¼ˆæœ€å¤š 10 ä¸ªç‰ˆæœ¬ï¼‰
  - [ ] 4.2 å®ç°æ’¤é”€æ“ä½œï¼ˆCtrl/Cmd + Zï¼‰
  - [ ] 4.3 å®ç°é‡åšæ“ä½œï¼ˆCtrl/Cmd + Shift + Zï¼‰
  - [ ] 4.4 æ˜¾ç¤ºç‰ˆæœ¬å†å²åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰

- [ ] **Task 5: é›†æˆç°æœ‰åŠŸèƒ½æŒ‰é’®** (AC: 4)
  - [ ] 5.1 é›†æˆ `CopyButton`ï¼ˆå¤ç”¨ Story 5.1ï¼‰
  - [ ] 5.2 é›†æˆ `ExportButton`ï¼ˆå¤ç”¨ Story 5.2ï¼‰
  - [ ] 5.3 åˆ›å»º "ä¿å­˜åˆ°æ¨¡ç‰ˆåº“" æŒ‰é’®ï¼ˆè¿æ¥åˆ° Story 5.4ï¼‰
  - [ ] 5.4 å®ç°æŒ‰é’®å¸ƒå±€å’Œå¯¹é½

- [ ] **Task 6: åº”ç”¨ Glassmorphism æ ·å¼** (AC: 5)
  - [ ] 6.1 åº”ç”¨ `ia-glass-card` æ ·å¼åˆ°ç¼–è¾‘å™¨å®¹å™¨
  - [ ] 6.2 é›†æˆ Lucide å›¾æ ‡ï¼ˆEdit, Eye, Copy, Download, Save, Undo, Redoï¼‰
  - [ ] 6.3 å®ç°å±•å¼€/æ”¶èµ·åŠ¨ç”»ï¼ˆ300ms è¿‡æ¸¡ï¼‰
  - [ ] 6.4 ç¡®ä¿è§†è§‰ä¸€è‡´æ€§ï¼ˆä¸ Story 5.1ã€5.2 ä¿æŒä¸€è‡´ï¼‰

- [ ] **Task 7: å®ç°å“åº”å¼å¸ƒå±€** (AC: 8)
  - [ ] 7.1 å®ç°æ¡Œé¢ç«¯ä¸‰åˆ—å¸ƒå±€
  - [ ] 7.2 å®ç°å¹³æ¿ç«¯ä¸¤åˆ—å¸ƒå±€
  - [ ] 7.3 å®ç°ç§»åŠ¨ç«¯å•åˆ—å¸ƒå±€
  - [ ] 7.4 æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸çš„æ˜¾ç¤ºæ•ˆæœ

- [ ] **Task 8: å•å…ƒæµ‹è¯•**
  - [ ] 8.1 æµ‹è¯• `TemplateEditorState` çŠ¶æ€ç®¡ç†
  - [ ] 8.2 æµ‹è¯•å†å²è®°å½•å’Œæ’¤é”€/é‡åšé€»è¾‘
  - [ ] 8.3 æµ‹è¯•å­—æ®µéªŒè¯åŠŸèƒ½
  - [ ] 8.4 æµ‹è¯•å®æ—¶é¢„è§ˆæ›´æ–°

- [ ] **Task 9: é›†æˆæµ‹è¯•**
  - [ ] 9.1 æµ‹è¯•å®Œæ•´ç¼–è¾‘æµç¨‹ï¼ˆæ‰“å¼€ â†’ ç¼–è¾‘ â†’ é¢„è§ˆ â†’ ä¿å­˜ï¼‰
  - [ ] 9.2 æµ‹è¯•æ’¤é”€/é‡åšæ“ä½œ
  - [ ] 9.3 æµ‹è¯•æŒ‰é’®é›†æˆï¼ˆå¤åˆ¶ã€å¯¼å‡ºã€ä¿å­˜ï¼‰
  - [ ] 9.4 æµ‹è¯•å“åº”å¼å¸ƒå±€

- [ ] **Task 10: E2E æµ‹è¯•**
  - [ ] 10.1 æµ‹è¯•å®Œæ•´ç”¨æˆ·æµç¨‹ï¼ˆåˆ†æ â†’ ç”Ÿæˆæ¨¡ç‰ˆ â†’ ç¼–è¾‘ â†’ ç”Ÿæˆå›¾ç‰‡ï¼‰
  - [ ] 10.2 æµ‹è¯•ç§»åŠ¨ç«¯ç¼–è¾‘æµç¨‹
  - [ ] 10.3 æµ‹è¯•é”®ç›˜å¿«æ·é”®ï¼ˆæ’¤é”€/é‡åšï¼‰
  - [ ] 10.4 è§†è§‰å›å½’æµ‹è¯•ï¼ˆç¼–è¾‘å™¨å¿«ç…§ï¼‰

## Dev Notes

### ä¸šåŠ¡ä¸Šä¸‹æ–‡

**Epic 5 ç›®æ ‡ï¼š** æ¨¡ç‰ˆç”Ÿæˆä¸ç®¡ç† - ç”¨æˆ·å¯ä»¥è·å¾—ç»“æ„åŒ–çš„æç¤ºè¯æ¨¡ç‰ˆï¼Œæ”¯æŒç¼–è¾‘å’Œå¯¼å‡º

**Story 5.3 å®šä½ï¼š** åœ¨ Story 5.1ï¼ˆæ¨¡ç‰ˆç”Ÿæˆï¼‰å’Œ 5.2ï¼ˆJSON å¯¼å‡ºï¼‰çš„åŸºç¡€ä¸Šï¼Œæä¾›åŠŸèƒ½ä¸°å¯Œçš„å¯è§†åŒ–ç¼–è¾‘å™¨ï¼Œè®©ç”¨æˆ·å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸ªæ¨¡ç‰ˆå­—æ®µ

**ç”¨æˆ·ä»·å€¼ï¼š**
- æ–°æ‰‹ç”¨æˆ·ï¼šé€šè¿‡å ä½ç¬¦å’Œç¤ºä¾‹å¿«é€Ÿå­¦ä¹ å¦‚ä½•ç¼–å†™ä¼˜è´¨æç¤ºè¯
- ä¸“ä¸šç”¨æˆ·ï¼šç²¾ç¡®æ§åˆ¶æ¯ä¸ªå­—æ®µï¼Œåˆ›å»ºé«˜è´¨é‡çš„å®šåˆ¶åŒ–æç¤ºè¯
- æ‰€æœ‰äººï¼šé€šè¿‡å®æ—¶é¢„è§ˆå’Œå†å²è®°å½•ï¼Œæå‡ç¼–è¾‘æ•ˆç‡å’Œå‡†ç¡®æ€§

**ä¸ºä»€ä¹ˆè¿™ä¸ªåŠŸèƒ½é‡è¦ï¼š**
- Story 5.1 æä¾›äº†åŸºç¡€ç¼–è¾‘åŠŸèƒ½ï¼Œä½†ç¼ºä¹ä¸“ä¸šç¼–è¾‘å·¥å…·
- ç”¨æˆ·éœ€è¦ç²¾ç»†æ§åˆ¶æ¯ä¸ªæ¨¡ç‰ˆå­—æ®µï¼ˆç‰¹åˆ«æ˜¯ä¸“ä¸šç”¨æˆ·ï¼‰
- å®æ—¶é¢„è§ˆå’Œå†å²è®°å½•å¯ä»¥å¤§å¹…æå‡ç”¨æˆ·ä½“éªŒ
- æ™ºèƒ½è¾…åŠ©åŠŸèƒ½å¯ä»¥é™ä½å­¦ä¹ æ›²çº¿

### ç›¸å…³åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰

- **FR19:** ç³»ç»Ÿå¯ä»¥æ ¹æ®é£æ ¼ç‰¹å¾ç”Ÿæˆå¯ç¼–è¾‘çš„å˜é‡æ¨¡ç‰ˆ
- **FR21:** ç³»ç»Ÿå¯ä»¥åœ¨æ¨¡ç‰ˆä¸­æ¸…æ™°æ ‡è®°å¯æ›¿æ¢çš„å˜é‡éƒ¨åˆ†
- **FR22:** ç”¨æˆ·å¯ä»¥ç¼–è¾‘ç”Ÿæˆçš„æ¨¡ç‰ˆå†…å®¹ï¼ˆStory 5.3 æ‰©å±•æ­¤åŠŸèƒ½ï¼‰
- **FR25:** ç³»ç»Ÿå¯ä»¥è°ƒç”¨æ–‡å­—æ¨¡å‹æä¾›å•†ä¼˜åŒ–æç¤ºè¯ï¼ˆStory 5.4ï¼‰

### æ¶æ„çº¦æŸ

**æŠ€æœ¯æ ˆï¼š**
- å‰ç«¯æ¡†æ¶ï¼šNext.js 15+ (App Router)
- çŠ¶æ€ç®¡ç†ï¼šZustandï¼ˆUI çŠ¶æ€ï¼‰+ React Queryï¼ˆæœåŠ¡å™¨çŠ¶æ€ï¼‰
- UI ç»„ä»¶ï¼šMUI + Tailwind CSSï¼ˆGlassmorphism æ ·å¼ï¼‰
- å›¾æ ‡åº“ï¼šLucide Reactï¼ˆå¿…é¡»ä½¿ç”¨ Edit, Eye, Copy, Download, Save, Undo, Redoï¼‰
- ç±»å‹æ£€æŸ¥ï¼šTypeScript
- å­—ä½“ï¼šJetBrains Monoï¼ˆä»£ç /é¢„è§ˆæ–‡æœ¬ï¼‰

**å‘½åè§„èŒƒï¼š**
- ç»„ä»¶ï¼šPascalCaseï¼ˆ`TemplateEditor`, `FieldEditor`, `TemplatePreview`ï¼‰
- å‡½æ•°/å˜é‡ï¼šcamelCaseï¼ˆ`updateField`, `undo`, `redo`ï¼‰
- ç±»å‹/æ¥å£ï¼šPascalCaseï¼ˆ`TemplateEditorState`, `FieldConfig`ï¼‰
- å¸¸é‡ï¼šUPPER_SNAKE_CASEï¼ˆ`MAX_HISTORY_SIZE`, `FIELD_CONFIGS`ï¼‰
- æ–‡ä»¶åï¼škebab-caseï¼ˆ`template-editor.tsx`ï¼‰

**é¡¹ç›®ç»“æ„ï¼š**
```
src/features/templates/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ TemplateEditor/
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ TemplateEditor.tsx  # ä¸»ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FieldEditor.tsx  # å­—æ®µç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ TemplatePreview.tsx  # é¢„è§ˆåŒºåŸŸ
â”‚   â”‚   â”œâ”€â”€ VersionHistory.tsx  # ç‰ˆæœ¬å†å²ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”œâ”€â”€ CopyButton/  # å¤ç”¨ Story 5.1
â”‚   â”œâ”€â”€ ExportButton/  # å¤ç”¨ Story 5.2
â”‚   â””â”€â”€ SaveButton/  # æ–°å¢ï¼ˆè¿æ¥åˆ° Story 5.4ï¼‰
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ useTemplateEditorStore.ts  # Zustand store
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ template-validator.ts  # å­—æ®µéªŒè¯
â”‚   â”œâ”€â”€ template-formatter.ts  # æ ¼å¼åŒ–å·¥å…·
â”‚   â””â”€â”€ suggestions.ts  # æ™ºèƒ½å»ºè®®æ•°æ®
â””â”€â”€ types/
    â”œâ”€â”€ editor.ts  # ç¼–è¾‘å™¨ç±»å‹å®šä¹‰
    â””â”€â”€ template.ts  # å·²å­˜åœ¨
```

### æ•°æ®ç»“æ„è®¾è®¡

**TemplateEditorState æ¥å£ï¼š**
```typescript
interface TemplateEditorState {
  // å½“å‰å­—æ®µå€¼
  fields: {
    subject: string;
    style: string;
    composition: string;
    colors: string;
    lighting: string;
    additional: string;
  };

  // å†å²è®°å½•
  history: {
    fields: TemplateEditorState['fields'];
    timestamp: number;
  }[];
  historyIndex: number;  // å½“å‰å†å²è®°å½•ç´¢å¼•

  // UI çŠ¶æ€
  isPreviewExpanded: boolean;
  activeField: keyof TemplateEditorState['fields'] | null;

  // æ“ä½œ
  updateField: (field: keyof TemplateEditorState['fields'], value: string) => void;
  undo: () => void;
  redo: () => void;
  canUndo: () => boolean;
  canRedo: () => boolean;
  togglePreview: () => void;
  reset: (initialFields: Partial<TemplateEditorState['fields']>) => void;
}
```

**FieldConfig æ¥å£ï¼š**
```typescript
interface FieldConfig {
  key: 'subject' | 'style' | 'composition' | 'colors' | 'lighting' | 'additional';
  label: string;
  placeholder: string;
  required: boolean;
  maxLength: number;
  suggestions: string[];  // æ™ºèƒ½å»ºè®®å…³é”®è¯
  validation?: (value: string) => string | null;  // è¿”å›é”™è¯¯ä¿¡æ¯æˆ– null
}
```

### çŠ¶æ€ç®¡ç†è®¾è®¡

**Zustand Storeï¼š**
```typescript
// src/features/templates/stores/useTemplateEditorStore.ts
import { create } from 'zustand';
import { subscribeWithSelector } from 'zustand/middleware';

const MAX_HISTORY_SIZE = 10;

export const useTemplateEditorStore = create<
  TemplateEditorState,
  [['zustand/subscribeWithSelector', never]]
>(
  subscribeWithSelector((set, get) => ({
    fields: {
      subject: '',
      style: '',
      composition: '',
      colors: '',
      lighting: '',
      additional: '',
    },
    history: [],
    historyIndex: -1,
    isPreviewExpanded: true,
    activeField: null,

    updateField: (field, value) => {
      const { fields, history, historyIndex } = get();

      // åˆ›å»ºæ–°çš„å­—æ®µçŠ¶æ€
      const newFields = { ...fields, [field]: value };

      // æ·»åŠ åˆ°å†å²è®°å½•
      const newHistory = history.slice(0, historyIndex + 1);
      newHistory.push({
        fields: newFields,
        timestamp: Date.now(),
      });

      // é™åˆ¶å†å²è®°å½•å¤§å°
      if (newHistory.length > MAX_HISTORY_SIZE) {
        newHistory.shift();
      }

      set({
        fields: newFields,
        history: newHistory,
        historyIndex: newHistory.length - 1,
      });
    },

    undo: () => {
      const { historyIndex } = get();
      if (historyIndex > 0) {
        const newIndex = historyIndex - 1;
        set({
          fields: get().history[newIndex].fields,
          historyIndex: newIndex,
        });
      }
    },

    redo: () => {
      const { history, historyIndex } = get();
      if (historyIndex < history.length - 1) {
        const newIndex = historyIndex + 1;
        set({
          fields: history[newIndex].fields,
          historyIndex: newIndex,
        });
      }
    },

    canUndo: () => get().historyIndex > 0,
    canRedo: () => get().historyIndex < get().history.length - 1,

    togglePreview: () => set((state) => ({ isPreviewExpanded: !state.isPreviewExpanded })),

    reset: (initialFields) => {
      const defaultFields = {
        subject: '',
        style: '',
        composition: '',
        colors: '',
        lighting: '',
        additional: '',
      };
      set({
        fields: { ...defaultFields, ...initialFields },
        history: [{ fields: { ...defaultFields, ...initialFields }, timestamp: Date.now() }],
        historyIndex: 0,
      });
    },
  }))
);
```

### å­—æ®µé…ç½®å’ŒéªŒè¯

**FIELD_CONFIGSï¼š**
```typescript
// src/features/templates/lib/field-configs.ts
import { FieldConfig } from '../types/editor';

export const FIELD_CONFIGS: Record<FieldConfig['key'], FieldConfig> = {
  subject: {
    key: 'subject',
    label: 'ä¸»ä½“æè¿°',
    placeholder: 'ä¾‹å¦‚ï¼šä¸€ä½ç¾ä¸½çš„å¥³æ€§',
    required: true,
    maxLength: 200,
    suggestions: ['ä¸€ä½ç¾ä¸½çš„å¥³æ€§', 'ä¸€ä¸ªå¯çˆ±çš„çŒ«å’ª', 'ä¸€åº§é›„ä¼Ÿçš„å±±è„‰', 'ä¸€è¾†å¤å¤æ±½è½¦'],
    validation: (value) => {
      if (!value.trim()) return 'ä¸»ä½“æè¿°ä¸èƒ½ä¸ºç©º';
      if (value.length > 200) return 'ä¸»ä½“æè¿°ä¸èƒ½è¶…è¿‡ 200 ä¸ªå­—ç¬¦';
      return null;
    },
  },
  style: {
    key: 'style',
    label: 'é£æ ¼æè¿°',
    placeholder: 'ä¾‹å¦‚ï¼šè‚–åƒæ‘„å½±é£æ ¼',
    required: true,
    maxLength: 150,
    suggestions: ['è‚–åƒæ‘„å½±é£æ ¼', 'å°è±¡æ´¾ç»˜ç”»é£æ ¼', 'èµ›åšæœ‹å…‹é£æ ¼', 'æç®€ä¸»ä¹‰é£æ ¼'],
    validation: (value) => {
      if (!value.trim()) return 'é£æ ¼æè¿°ä¸èƒ½ä¸ºç©º';
      if (value.length > 150) return 'é£æ ¼æè¿°ä¸èƒ½è¶…è¿‡ 150 ä¸ªå­—ç¬¦';
      return null;
    },
  },
  composition: {
    key: 'composition',
    label: 'æ„å›¾ä¿¡æ¯',
    placeholder: 'ä¾‹å¦‚ï¼šç‰¹å†™ï¼Œå±…ä¸­æ„å›¾',
    required: false,
    maxLength: 150,
    suggestions: ['ç‰¹å†™ï¼Œå±…ä¸­æ„å›¾', 'å…¨æ™¯ï¼Œä¸‰åˆ†æ³•æ„å›¾', 'ä¿¯è§†è§’åº¦', 'å¯¹ç§°æ„å›¾'],
  },
  colors: {
    key: 'colors',
    label: 'è‰²å½©æ–¹æ¡ˆ',
    placeholder: 'ä¾‹å¦‚ï¼šæš–è‰²è°ƒï¼ŒæŸ”å’Œçš„æ£•è‰²å’Œé‡‘è‰²',
    required: false,
    maxLength: 150,
    suggestions: ['æš–è‰²è°ƒï¼ŒæŸ”å’Œçš„æ£•è‰²å’Œé‡‘è‰²', 'å†·è‰²è°ƒï¼Œè“è‰²å’Œç°è‰²', 'é²œè‰³çš„è‰²å½©ï¼Œé«˜é¥±å’Œåº¦', 'é»‘ç™½å•è‰²'],
  },
  lighting: {
    key: 'lighting',
    label: 'å…‰çº¿è®¾ç½®',
    placeholder: 'ä¾‹å¦‚ï¼šæŸ”å’Œçš„è‡ªç„¶å…‰ï¼Œé»„é‡‘æ—¶åˆ»',
    required: false,
    maxLength: 150,
    suggestions: ['æŸ”å’Œçš„è‡ªç„¶å…‰ï¼Œé»„é‡‘æ—¶åˆ»', 'å¼ºçƒˆçš„ä¾§å…‰ï¼Œæˆå‰§æ•ˆæœ', 'æ¼«å°„å…‰ï¼ŒæŸ”å…‰ç®±', 'éœ“è™¹ç¯å…‰ï¼Œèµ›åšæœ‹å…‹'],
  },
  additional: {
    key: 'additional',
    label: 'å…¶ä»–ç»†èŠ‚',
    placeholder: 'ä¾‹å¦‚ï¼šä¼˜é›…çš„å§¿åŠ¿ï¼Œå¹³é™çš„è¡¨æƒ…',
    required: false,
    maxLength: 300,
    suggestions: ['ä¼˜é›…çš„å§¿åŠ¿ï¼Œå¹³é™çš„è¡¨æƒ…', 'å……æ»¡æ´»åŠ›çš„åŠ¨ä½œï¼ŒåŠ¨æ€æ„Ÿ', 'æ¢¦å¹»çš„æ°›å›´ï¼ŒæŸ”å’Œçš„ç»†èŠ‚', 'ç§‘æŠ€æ„Ÿå…ƒç´ ï¼Œæœªæ¥ä¸»ä¹‰'],
  },
};
```

### UI/UX è®¾è®¡è§„èŒƒ

**Glassmorphism æ ·å¼ï¼š**
- ç¼–è¾‘å™¨å®¹å™¨ä½¿ç”¨ `ia-glass-card` ç±»
- å­—æ®µç¼–è¾‘å™¨ä½¿ç”¨ `ia-glass-card` ç±»ï¼ˆåŠé€æ˜èƒŒæ™¯ï¼‰
- é¢„è§ˆåŒºåŸŸä½¿ç”¨ `ia-glass-card` ç±»ï¼ˆæ›´æ·±çš„èƒŒæ™¯ï¼‰

**å›¾æ ‡ç³»ç»Ÿï¼š**
- ç¼–è¾‘å›¾æ ‡ï¼š`<Edit size={16} className="text-green-500" />`
- é¢„è§ˆå›¾æ ‡ï¼š`<Eye size={16} className="text-green-500" />`
- æ’¤é”€å›¾æ ‡ï¼š`<Undo size={16} className="text-gray-400" />`ï¼ˆç¦ç”¨çŠ¶æ€ï¼‰
- é‡åšå›¾æ ‡ï¼š`<Redo size={16} className="text-gray-400" />`ï¼ˆç¦ç”¨çŠ¶æ€ï¼‰
- ä¿å­˜å›¾æ ‡ï¼š`<Save size={16} className="text-green-500" />`

**å­—ä½“ç³»ç»Ÿï¼š**
- å­—æ®µæ ‡ç­¾ï¼šPoppinsï¼ˆä¸é¡¹ç›®ä¸€è‡´ï¼‰
- å­—æ®µè¾“å…¥ï¼šOpen Sansï¼ˆä¸é¡¹ç›®ä¸€è‡´ï¼‰
- é¢„è§ˆæ–‡æœ¬ï¼šJetBrains Monoï¼ˆç­‰å®½å­—ä½“ï¼Œä¾¿äºé˜…è¯»ä»£ç æ ¼å¼ï¼‰

**å¸ƒå±€ç»“æ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡ç‰ˆç¼–è¾‘å™¨                          [æ’¤é”€] [é‡åš] [ä¿å­˜] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å­—æ®µç¼–è¾‘åŒºåŸŸ   â”‚  â”‚ å®æ—¶é¢„è§ˆåŒºåŸŸ   â”‚  â”‚ æ“ä½œæŒ‰é’®    â”‚ â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ Subject:      â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ [å¤åˆ¶]      â”‚ â”‚
â”‚  â”‚ [è¾“å…¥æ¡†]      â”‚  â”‚ â”‚ å®Œæ•´æç¤ºè¯ â”‚ â”‚  â”‚ [å¯¼å‡º]      â”‚ â”‚
â”‚  â”‚               â”‚  â”‚ â”‚ é¢„è§ˆå†…å®¹   â”‚ â”‚  â”‚ [ä¿å­˜åˆ°åº“]  â”‚ â”‚
â”‚  â”‚ Style:        â”‚  â”‚ â”‚           â”‚ â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ [è¾“å…¥æ¡†]      â”‚  â”‚ â”‚           â”‚ â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ ...           â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠ¨ç”»å’Œè¿‡æ¸¡ï¼š**
- å±•å¼€/æ”¶èµ·é¢„è§ˆï¼š300ms å¹³æ»‘è¿‡æ¸¡
- æ’¤é”€/é‡åšï¼šç«‹å³æ›´æ–°ï¼Œæ— åŠ¨ç”»
- å­—æ®µç¼–è¾‘ï¼šæ— å»¶è¿Ÿæ›´æ–°

**å“åº”å¼è®¾è®¡ï¼š**
- æ¡Œé¢ç«¯ï¼ˆâ‰¥ 1024pxï¼‰ï¼šä¸‰åˆ—å¸ƒå±€
- å¹³æ¿ç«¯ï¼ˆ768-1024pxï¼‰ï¼šä¸¤åˆ—å¸ƒå±€ï¼ˆå­—æ®µç¼–è¾‘ | é¢„è§ˆ+æŒ‰é’®ï¼‰
- ç§»åŠ¨ç«¯ï¼ˆ< 768pxï¼‰ï¼šå•åˆ—å¸ƒå±€ï¼Œå¯æŠ˜å å­—æ®µ

### æ€§èƒ½è¦æ±‚

- å­—æ®µç¼–è¾‘å»¶è¿Ÿï¼š< 50msï¼ˆæ— æ„ŸçŸ¥å»¶è¿Ÿï¼‰
- é¢„è§ˆæ›´æ–°å»¶è¿Ÿï¼š< 50msï¼ˆå®æ—¶åŒæ­¥ï¼‰
- æ’¤é”€/é‡åšå»¶è¿Ÿï¼š< 100msï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
- å†å²è®°å½•å†…å­˜ï¼š< 1MBï¼ˆ10 ä¸ªç‰ˆæœ¬ Ã— 6 ä¸ªå­—æ®µï¼‰

### å®‰å…¨è€ƒè™‘

- **å†…å®¹å®‰å…¨ï¼š** ç¼–è¾‘åçš„å†…å®¹éœ€è¦é€šè¿‡å†…å®¹å®‰å…¨æ£€æŸ¥ï¼ˆå¤ç”¨ Story 4.1 çš„é€»è¾‘ï¼‰
- **ç”¨æˆ·æƒé™ï¼š** ç”¨æˆ·åªèƒ½ç¼–è¾‘è‡ªå·±çš„æ¨¡ç‰ˆ
- **XSS é˜²æŠ¤ï¼š** é¢„è§ˆå†…å®¹éœ€è¦è½¬ä¹‰ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»
- **æ•°æ®éªŒè¯ï¼š** å‰ç«¯éªŒè¯ + åç«¯éªŒè¯ï¼ˆåŒé‡éªŒè¯ï¼‰

### ä¾èµ–å…³ç³»

**å‰ç½®ä¾èµ–ï¼š**
- âœ… Story 5.1: æ¨¡ç‰ˆç”Ÿæˆï¼ˆå·²å®Œæˆ `Template` æ¥å£å’Œå­—æ®µå®šä¹‰ï¼‰
- âœ… Story 5.2: JSON å¯¼å‡ºï¼ˆå·²å®Œæˆ `ExportButton` ç»„ä»¶ï¼‰
- âœ… Story 4.1: å†…å®¹å®¡æ ¸ï¼ˆå·²å®Œæˆå†…å®¹å®‰å…¨æ£€æŸ¥é€»è¾‘ï¼‰
- âœ… UX-UPGRADE-1: UX è®¾è®¡è§„èŒƒå‡çº§ï¼ˆGlassmorphism + Lucide å›¾æ ‡ï¼‰

**åç½®ä¾èµ–ï¼š**
- ğŸŸ¡ Story 5.4: æç¤ºè¯ä¼˜åŒ–ï¼ˆè°ƒç”¨æ–‡å­—æ¨¡å‹ API ä¼˜åŒ–ç¼–è¾‘åçš„æ¨¡ç‰ˆï¼‰
- ğŸŸ¡ Epic 7: æ¨¡ç‰ˆåº“ä¸å†å²è®°å½•ï¼ˆä¿å­˜ç¼–è¾‘åçš„æ¨¡ç‰ˆåˆ°ä¸ªäººåº“ï¼‰

### é”®ç›˜å¿«æ·é”®

- `Ctrl/Cmd + Z`ï¼šæ’¤é”€
- `Ctrl/Cmd + Shift + Z`ï¼šé‡åš
- `Ctrl/Cmd + C`ï¼šå¤åˆ¶é¢„è§ˆå†…å®¹ï¼ˆå¤ç”¨ Story 5.1ï¼‰
- `Ctrl/Cmd + S`ï¼šä¿å­˜åˆ°æ¨¡ç‰ˆåº“ï¼ˆè¿æ¥åˆ° Story 5.4ï¼‰

### æ™ºèƒ½å»ºè®®åŠŸèƒ½

**å»ºè®®æ¥æºï¼š**
- ä»ç°æœ‰æ¨¡ç‰ˆä¸­æå–é«˜é¢‘å…³é”®è¯
- ä» PRD å’Œ Architecture ä¸­æå–å¸¸ç”¨æœ¯è¯­
- ä»ç”¨æˆ·å†å²è®°å½•ä¸­å­¦ä¹ ï¼ˆæœªæ¥ä¼˜åŒ–ï¼‰

**å»ºè®®å±•ç¤ºæ–¹å¼ï¼š**
- ä¸‹æ‹‰èœå•ï¼ˆç‚¹å‡»å­—æ®µæ ‡ç­¾æ˜¾ç¤ºï¼‰
- æ ‡ç­¾äº‘ï¼ˆåœ¨å­—æ®µä¸‹æ–¹æ˜¾ç¤ºï¼‰
- è‡ªåŠ¨è¡¥å…¨ï¼ˆè¾“å…¥æ—¶æ˜¾ç¤ºåŒ¹é…é¡¹ï¼‰

### é£é™©å’Œç¼“è§£æªæ–½

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |
|------|-------|------|---------|
| æ’¤é”€/é‡åšé€»è¾‘å¤æ‚åº¦é«˜ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ä¸¥æ ¼æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼Œæä¾›æ¸…æ™°çš„ç”¨æˆ·åé¦ˆ |
| å†å²è®°å½•å ç”¨å†…å­˜è¿‡å¤š | ğŸŸ¢ ä½ | ğŸŸ¢ ä½ | é™åˆ¶å†å²è®°å½•å¤§å°ï¼ˆæœ€å¤š 10 ä¸ªç‰ˆæœ¬ï¼‰ |
| å®æ—¶é¢„è§ˆæ€§èƒ½é—®é¢˜ | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | ä½¿ç”¨é˜²æŠ–ä¼˜åŒ–ï¼Œé¿å…é¢‘ç¹æ›´æ–° |
| ç§»åŠ¨ç«¯ç¼–è¾‘ä½“éªŒå·® | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | å¢åŠ ç§»åŠ¨ç«¯æµ‹è¯•ï¼Œä¼˜åŒ–è§¦æ‘¸äº¤äº’ |
| æ™ºèƒ½å»ºè®®è´¨é‡ä¸é«˜ | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä½ | åŸºäºçœŸå®æ•°æ®ä¼˜åŒ–å»ºè®®ï¼Œæ”¯æŒè‡ªå®šä¹‰ |

### éªŒæ”¶æµ‹è¯•æ£€æŸ¥æ¸…å•

**åŠŸèƒ½æµ‹è¯•ï¼š**
- [ ] ç¼–è¾‘å™¨æ˜¾ç¤ºæ­£ç¡®ï¼ˆæ‰€æœ‰ 6 ä¸ªå­—æ®µï¼‰
- [ ] å­—æ®µç¼–è¾‘åŠŸèƒ½æ­£å¸¸ï¼ˆå®æ—¶æ›´æ–°ï¼‰
- [ ] å®æ—¶é¢„è§ˆåŠŸèƒ½æ­£å¸¸ï¼ˆæ— å»¶è¿Ÿï¼‰
- [ ] æ’¤é”€/é‡åšåŠŸèƒ½æ­£å¸¸ï¼ˆé”®ç›˜å¿«æ·é”®ï¼‰
- [ ] å†å²è®°å½•åŠŸèƒ½æ­£å¸¸ï¼ˆæœ€å¤š 10 ä¸ªç‰ˆæœ¬ï¼‰
- [ ] æ™ºèƒ½å»ºè®®åŠŸèƒ½æ­£å¸¸ï¼ˆä¸‹æ‹‰èœå•æˆ–æ ‡ç­¾ï¼‰
- [ ] æŒ‰é’®é›†æˆæ­£å¸¸ï¼ˆå¤åˆ¶ã€å¯¼å‡ºã€ä¿å­˜ï¼‰
- [ ] å­—æ®µéªŒè¯åŠŸèƒ½æ­£å¸¸ï¼ˆå¿…å¡«å­—æ®µã€å­—ç¬¦é™åˆ¶ï¼‰

**è§†è§‰æµ‹è¯•ï¼š**
- [ ] Glassmorphism æ ·å¼åº”ç”¨æ­£ç¡®
- [ ] Lucide å›¾æ ‡æ˜¾ç¤ºæ­£ç¡®ï¼ˆæ‰€æœ‰å›¾æ ‡ï¼‰
- [ ] JetBrains Mono å­—ä½“åº”ç”¨æ­£ç¡®ï¼ˆé¢„è§ˆåŒºåŸŸï¼‰
- [ ] å±•å¼€/æ”¶èµ·åŠ¨ç”»æµç•…ï¼ˆ300msï¼‰
- [ ] å“åº”å¼å¸ƒå±€æ­£ç¡®ï¼ˆæ¡Œé¢/å¹³æ¿/ç§»åŠ¨ï¼‰

**å…¼å®¹æ€§æµ‹è¯•ï¼š**
- [ ] Chrome ç¼–è¾‘å™¨åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] Safari ç¼–è¾‘å™¨åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] Firefox ç¼–è¾‘å™¨åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] ç§»åŠ¨ç«¯ç¼–è¾‘å™¨åŠŸèƒ½æµ‹è¯•é€šè¿‡

**æ€§èƒ½æµ‹è¯•ï¼š**
- [ ] å­—æ®µç¼–è¾‘å»¶è¿Ÿ < 50ms
- [ ] é¢„è§ˆæ›´æ–°å»¶è¿Ÿ < 50ms
- [ ] æ’¤é”€/é‡åšå»¶è¿Ÿ < 100ms
- [ ] å†å²è®°å½•å†…å­˜ < 1MB

**å®‰å…¨æµ‹è¯•ï¼š**
- [ ] å†…å®¹å®‰å…¨æ£€æŸ¥æ­£ç¡®æ‹¦æˆªä¸å½“å†…å®¹
- [ ] ç”¨æˆ·æ— æ³•ç¼–è¾‘ä»–äººçš„æ¨¡ç‰ˆ
- [ ] é¢„è§ˆå†…å®¹æ­£ç¡®è½¬ä¹‰ï¼ˆXSS é˜²æŠ¤ï¼‰
- [ ] å‰ç«¯å’Œåç«¯éªŒè¯éƒ½æ­£å¸¸å·¥ä½œ

**ç”¨æˆ·ä½“éªŒæµ‹è¯•ï¼š**
- [ ] ç¼–è¾‘æµç¨‹æµç•…ï¼ˆæ‰“å¼€ â†’ ç¼–è¾‘ â†’ é¢„è§ˆ â†’ ä¿å­˜ï¼‰
- [ ] é”®ç›˜å¿«æ·é”®æ­£å¸¸å·¥ä½œ
- [ ] é”™è¯¯æƒ…å†µæœ‰å‹å¥½æç¤º
- [ ] ç§»åŠ¨ç«¯ä½“éªŒè‰¯å¥½

### Previous Story Intelligence

ä» Story 5.1ï¼ˆæ¨¡ç‰ˆç”Ÿæˆï¼‰å’Œ 5.2ï¼ˆJSON å¯¼å‡ºï¼‰å­¦åˆ°çš„ç»éªŒï¼š

1. **æ¨¡ç‰ˆæ•°æ®ç»“æ„ï¼š** Story 5.1 å·²ç»å®šä¹‰äº† `Template` æ¥å£å’Œ 6 ä¸ªæ ¸å¿ƒå­—æ®µï¼Œå¯ä»¥ç›´æ¥ç”¨äºç¼–è¾‘å™¨
2. **UI ç»„ä»¶æ¨¡å¼ï¼š** å‚è€ƒ `CopyButton` å’Œ `ExportButton` çš„å®ç°ï¼Œä¿æŒä¸€è‡´çš„ä»£ç é£æ ¼
3. **Glassmorphism æ ·å¼ï¼š** Story 5.1 å·²ç»å¹¿æ³›åº”ç”¨äº† `ia-glass-card` æ ·å¼ï¼Œå¯ä»¥å¤ç”¨
4. **Lucide å›¾æ ‡ç³»ç»Ÿï¼š** é¡¹ç›®å·²ç»å»ºç«‹äº† Lucide å›¾æ ‡ç³»ç»Ÿï¼Œéœ€è¦ä½¿ç”¨ Edit, Eye, Undo, Redo, Save ç­‰å›¾æ ‡
5. **Zustand çŠ¶æ€ç®¡ç†ï¼š** é¡¹ç›®ä½¿ç”¨ Zustand è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œéœ€è¦åˆ›å»º `useTemplateEditorStore`

**éœ€è¦æ³¨æ„çš„å˜æ›´ï¼š**
- ç¼–è¾‘å™¨éœ€è¦ç»´æŠ¤å†å²è®°å½•ï¼ˆæ’¤é”€/é‡åšåŠŸèƒ½ï¼‰
- ç¼–è¾‘å™¨éœ€è¦å®æ—¶é¢„è§ˆï¼ˆå“åº”å­—æ®µå˜åŒ–ï¼‰
- ç¼–è¾‘å™¨éœ€è¦å­—æ®µéªŒè¯ï¼ˆå¿…å¡«å­—æ®µã€å­—ç¬¦é™åˆ¶ï¼‰
- ç¼–è¾‘å™¨éœ€è¦æ”¯æŒç§»åŠ¨ç«¯ï¼ˆå“åº”å¼å¸ƒå±€ï¼‰

### Git Intelligence

æœ€è¿‘çš„æäº¤è®°å½•æ˜¾ç¤ºï¼š
- `ace3833`: ä¿®å¤äº† Aliyun å›¾ç‰‡ä¸Šä¼ çš„ base64 ç¼–ç é—®é¢˜
- `94c1ab0`: ä¸º Paper ç»„ä»¶åº”ç”¨äº† Glassmorphism èƒŒæ™¯
- `dbeeb63`: é»˜è®¤å±•å¼€åˆ†æè¯¦æƒ…å’Œè´¨é‡ä¿¡æ¯

**ç›¸å…³ä»£ç æ¨¡å¼ï¼š**
- Glassmorphism æ ·å¼å·²ç»åœ¨é¡¹ç›®ä¸­å¹¿æ³›åº”ç”¨ï¼ˆ`ia-glass-card`ï¼‰
- Lucide å›¾æ ‡ç³»ç»Ÿå·²ç»å»ºç«‹ï¼ˆå‚è€ƒ `Copy`, `Download` å›¾æ ‡çš„ä½¿ç”¨ï¼‰
- Zustand store æ¨¡å¼å·²ç»åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼ˆå‚è€ƒå…¶ä»–åŠŸèƒ½çš„ store å®ç°ï¼‰
- Toast åé¦ˆæœºåˆ¶å·²ç»å­˜åœ¨ï¼ˆå¤ç”¨ç°æœ‰å®ç°ï¼‰

### Project Context Reference

**é¡¹ç›®ä½ç½®ï¼š** `/Users/muchao/code/image_analyzer`

**ç›¸å…³æ–‡æ¡£ï¼š**
- PRD: `/Users/muchao/code/image_analyzer/_bmad-output/planning-artifacts/prd.md`
- Architecture: `/Users/muchao/code/image_analyzer/_bmad-output/planning-artifacts/architecture.md`
- UX Design: `/Users/muchao/code/image_analyzer/_bmad-output/planning-artifacts/ux-design-specification.md`
- Story 5.1: `/Users/muchao/code/image_analyzer/_bmad-output/implementation-artifacts/story-5-1-template-generation.md`
- Story 5.2: `/Users/muchao/code/image_analyzer/_bmad-output/implementation-artifacts/story-5-2-json-export.md`

**å…³é”®ä¾èµ–ï¼š**
- Story 5.1: æ¨¡ç‰ˆç”Ÿæˆé€»è¾‘ï¼ˆ`src/features/templates/lib/template-generator.ts`ï¼‰
- Story 5.2: å¯¼å‡ºæŒ‰é’®ç»„ä»¶ï¼ˆ`src/features/templates/components/ExportButton/`ï¼‰
- Story 4.1: å†…å®¹å®¡æ ¸é€»è¾‘ï¼ˆ`src/lib/content-moderation.ts`ï¼‰
- UX-UPGRADE-1: Glassmorphism æ ·å¼ï¼ˆ`src/app/globals.css`ï¼‰

## Dev Agent Record

### Agent Model Used

_Claude Sonnet 4.6 (claude-sonnet-4-6)_

### Debug Log References

_å¾…å¼€å‘æ—¶å¡«å†™_

### Completion Notes List

_å¾…å¼€å‘æ—¶å¡«å†™_

### File List

_å¾…å¼€å‘æ—¶å¡«å†™_
