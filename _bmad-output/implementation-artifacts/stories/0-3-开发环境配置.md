# Story 0-3: å¼€å‘ç¯å¢ƒé…ç½®

Status: review

## Story

As a å¼€å‘å›¢é˜Ÿ,
I want æ‹¥æœ‰ä¸€è‡´çš„å¼€å‘ç¯å¢ƒå’Œå·¥å…·é…ç½®,
so that æˆ‘ä»¬å¯ä»¥é«˜æ•ˆåä½œå¹¶ä¿æŒä»£ç è´¨é‡.

## User Outcomes

- æ‰€æœ‰å¼€å‘è€…ä½¿ç”¨ç›¸åŒçš„ä»£ç æ ¼å¼å’Œé£æ ¼
- ä»£ç åœ¨æäº¤å‰è‡ªåŠ¨æ£€æŸ¥
- VSCode è®¾ç½®åŒæ­¥
- Git hooks é˜²æ­¢ä½è´¨é‡ä»£ç è¿›å…¥ä»“åº“

## Acceptance Criteria

1. [x] VSCode è®¾ç½®æ­£ç¡®é…ç½®:
   - [x] .vscode/settings.json é…ç½®ç¼–è¾‘å™¨å’Œæ ¼å¼åŒ–
   - [x] .vscode/extensions.json æ¨èæ‰©å±•åˆ—è¡¨
   - [x] .vscode/tasks.json æ„å»ºä»»åŠ¡
2. [x] ESLint é…ç½®æ­£ç¡®:
   - [x] .eslintrc.json åŸºç¡€é…ç½® (ä½¿ç”¨ ESLint 9 flat config æ ¼å¼: eslint.config.mjs)
   - [x] TypeScript è§„åˆ™
   - [x] React è§„åˆ™
   - [x] Tailwind CSS è§„åˆ™ï¼ˆå¦‚ä½¿ç”¨ï¼‰
3. [x] Prettier é…ç½®æ­£ç¡®:
   - [x] .prettierrc æ ¼å¼åŒ–è§„åˆ™
   - [x] .prettierignore å¿½ç•¥æ–‡ä»¶
4. [x] Git hooks é…ç½®æ­£ç¡®:
   - [x] husky å®‰è£…å’Œåˆå§‹åŒ–
   - [x] lint-staged é…ç½®
   - [x] pre-commit hook è‡ªåŠ¨è¿è¡Œ lint
5. [x] GitHub Actions æœ¬åœ°éªŒè¯ï¼ˆå¦‚éœ€è¦ï¼‰:
   - [x] act é…ç½®ï¼ˆå¯é€‰ï¼Œç”¨äºæœ¬åœ°è¿è¡Œ GitHub Actionsï¼‰- æœªåœ¨æ­¤ story ä¸­å®ç°
6. [x] package.json è„šæœ¬é…ç½®:
   - [x] "lint": è¿è¡Œ ESLint
   - [x] "format": è¿è¡Œ Prettier
   - [x] "format:check": æ£€æŸ¥æ ¼å¼
   - [x] "type-check": ç±»å‹æ£€æŸ¥
7. [x] ä»£ç ç¤ºä¾‹éªŒè¯:
   - [x] éªŒè¯ lint ä¸æŠ¥é”™
   - [x] éªŒè¯ format æ­£ç¡®æ ¼å¼åŒ–ä»£ç 
   - [x] éªŒè¯ç±»å‹æ£€æŸ¥é€šè¿‡

## Tasks / Subtasks

- [x] Task 1: é…ç½® VSCode è®¾ç½® (AC: #1)
  - [x] 1.1 åˆ›å»º .vscode/settings.json
  - [x] 1.2 åˆ›å»º .vscode/extensions.json
  - [x] 1.3 åˆ›å»º .vscode/tasks.json
- [x] Task 2: é…ç½® ESLint (AC: #2)
  - [x] 2.1 å®‰è£… ESLint ç›¸å…³ä¾èµ–
  - [x] 2.2 åˆ›å»º .eslintrc.json (ä½¿ç”¨ ESLint 9 flat config æ ¼å¼: eslint.config.mjs)
  - [x] 2.3 åˆ›å»º .eslintignore
- [x] Task 3: é…ç½® Prettier (AC: #3)
  - [x] 3.1 å®‰è£… Prettier
  - [x] 3.2 åˆ›å»º .prettierrc
  - [x] 3.3 åˆ›å»º .prettierignore
- [x] Task 4: é…ç½® Git hooks (AC: #4)
  - [x] 4.1 åˆå§‹åŒ– husky
  - [x] 4.2 é…ç½® lint-staged
  - [x] 4.3 åˆ›å»º pre-commit hook
- [x] Task 5: é…ç½® package.json è„šæœ¬ (AC: #6)
  - [x] 5.1 æ·»åŠ  lint è„šæœ¬
  - [x] 5.2 æ·»åŠ  format è„šæœ¬
  - [x] 5.3 æ·»åŠ  format:check è„šæœ¬
  - [x] 5.4 æ·»åŠ  type-check è„šæœ¬
- [x] Task 6: éªŒè¯é…ç½® (AC: #7)
  - [x] 6.1 è¿è¡Œ lint æ£€æŸ¥
  - [x] 6.2 è¿è¡Œæ ¼å¼æ£€æŸ¥
  - [x] 6.3 è¿è¡Œç±»å‹æ£€æŸ¥

## Dev Notes

### VSCode é…ç½®

```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "typescript.preferences.importModuleSpecifier": "non-relative",
  "tailwindCSS.experimental.classRegex": [
    ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"],
    ["cn\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"]
  ]
}
```

```json
// .vscode/extensions.json
{
  "recommendations": [
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "bradlc.vscode-tailwindcss",
    "formulahendry.auto-rename-tag",
    "dsznajder.es7-react-js-snippets"
  ]
}
```

### ESLint é…ç½®

```javascript
// eslint.config.mjs (ESLint 9 Flat Config æ ¼å¼)
import { defineConfig, globalIgnores } from 'eslint/config';
import nextVitals from 'eslint-config-next/core-web-vitals';
import nextTs from 'eslint-config-next/typescript';
import reactHooks from 'eslint-plugin-react-hooks';
import prettier from 'eslint-config-prettier';

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  prettier,
  {
    plugins: {
      'react-hooks': reactHooks,
    },
    rules: {
      '@typescript-eslint/no-unused-vars': 'warn',
      'react-hooks/exhaustive-deps': 'warn',
      '@typescript-eslint/no-explicit-any': 'warn',
    },
  },
  globalIgnores([
    '.next/**',
    'out/**',
    'build/**',
    'node_modules/**',
    'coverage/**',
    '*.log',
    '.env*',
  ]),
]);

export default eslintConfig;
```

### Prettier é…ç½®

```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "all",
  "printWidth": 100,
  "bracketSpacing": true
}
```

### Git Hooks é…ç½®

```bash
# åˆå§‹åŒ– husky
npx husky install

# æ·»åŠ  pre-commit hook
npx husky add .husky/pre-commit "npx lint-staged"
```

```json
// package.json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": ["eslint --fix", "prettier --write"],
    "*.{json,md,css}": ["prettier --write"]
  }
}
```

### package.json è„šæœ¬

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "type-check": "tsc --noEmit"
  }
}
```

### å‘½åè§„èŒƒ

| ç±»åˆ«        | è§„åˆ™          | ç¤ºä¾‹                               |
| ----------- | ------------- | ---------------------------------- |
| é…ç½®æ–‡ä»¶    | dot-prefixed  | `.eslintrc.json`, `.prettierrc`    |
| VSCode é…ç½® | .vscode/ ç›®å½• | `settings.json`, `extensions.json` |

### Project Structure Notes

```
.vscode/
â”œâ”€â”€ settings.json       # VSCode è®¾ç½®
â”œâ”€â”€ extensions.json     # æ¨èæ‰©å±•
â””â”€â”€ tasks.json          # æ„å»ºä»»åŠ¡

eslint.config.mjs       # ESLint 9 Flat Config
.editorconfig           # EditorConfig
.prettierrc
.prettierignore
.husky/
â””â”€â”€ pre-commit
```

### References

- å‘½åè§„èŒƒ: [architecture.md#naming-patterns](_bmad-output/planning-artifacts/architecture.md#naming-patterns)
- ä»£ç ç»„ç»‡: [architecture.md#structure-patterns](_bmad-output/planning-artifacts/architecture.md#structure-patterns)

## Dev Agent Record

### Agent Model Used

Claude Sonnet 4.5

### Debug Log References

### Completion Notes List

- âœ… å®Œæˆæ‰€æœ‰å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶çš„åˆ›å»ºå’Œæ›´æ–°
- âœ… ESLint ä½¿ç”¨æ–°ç‰ˆ flat config æ ¼å¼ (eslint.config.mjs) è€Œéä¼ ç»Ÿçš„ .eslintrc.json
- âœ… æ·»åŠ äº† TypeScript å’Œ React hooks è§„åˆ™åˆ° ESLint é…ç½®
- âœ… VSCode é…ç½®åŒ…å« Tailwind CSS classRegex æ”¯æŒ
- âœ… æ·»åŠ äº† Prettier æ ¼å¼è§„åˆ™å’Œå¿½ç•¥é…ç½®
- âœ… Git hooks é€šè¿‡ husky å’Œ lint-staged è‡ªåŠ¨è¿è¡Œä»£ç æ£€æŸ¥
- âœ… package.json æ·»åŠ äº† formatã€format:checkã€type-check è„šæœ¬
- âœ… æ‰€æœ‰éªŒè¯æ£€æŸ¥é€šè¿‡ (lint, format check, type-check)

### File List

- `.vscode/settings.json` (æ›´æ–° - å¢å¼ºç¼–è¾‘å™¨é…ç½®)
- `.vscode/extensions.json` (æ–°å»º - æ¨èæ‰©å±•åˆ—è¡¨)
- `.vscode/tasks.json` (æ–°å»º - æ„å»ºä»»åŠ¡)
- `eslint.config.mjs` (æ›´æ–° - æ·»åŠ  TypeScript å’Œ React è§„åˆ™ï¼Œä½¿ç”¨ globalIgnores)
- `.editorconfig` (æ–°å»º - EditorConfig æ”¯æŒ)
- `.prettierrc` (æ›´æ–° - å¢å¼ºæ ¼å¼è§„åˆ™)
- `.prettierignore` (æ–°å»º - Prettier å¿½ç•¥æ–‡ä»¶)
- `.husky/pre-commit` (å­˜åœ¨ - å·²éªŒè¯é…ç½®æ­£ç¡®)
- `package.json` (æ›´æ–° - æ·»åŠ  format, format:check, type-check è„šæœ¬)
- `.gitignore` (æ›´æ–° - ç§»é™¤ .vscode å¿½ç•¥)
- `.eslintignore` (å·²åˆ é™¤ - ESLint 9 ä¸æ”¯æŒ)

---

## Senior Developer Review (AI)

**Review Date:** 2026-02-04
**Reviewer:** Senior Developer (Adversarial Review)
**Review Model:** Claude Sonnet 4.5

### Findings Summary

| ç±»åˆ« | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| ğŸ”´ HIGH | 3 | 0 |
| ğŸŸ¡ MEDIUM | 2 | 0 |
| ğŸŸ¢ LOW | 1 | 0 |

### Action Items (All Fixed)

- [x] [HIGH] ç§»é™¤ `.gitignore` ä¸­çš„ `.vscode` å¿½ç•¥é…ç½® - ä½¿å›¢é˜Ÿå¯å…±äº« VSCode é…ç½®
- [x] [HIGH] åˆ é™¤ `.eslintignore`ï¼Œæ”¹ç”¨ `eslint.config.mjs` ä¸­çš„ `globalIgnores()` - ESLint 9 ä¸æ”¯æŒä¼ ç»Ÿå¿½ç•¥æ–‡ä»¶
- [x] [HIGH] æ›´æ–° Dev Notes ä¸º ESLint 9 Flat Config æ ¼å¼
- [x] [MEDIUM] ç§»é™¤ VSCode settings ä¸­å†—ä½™çš„ `eslint.validate` é…ç½®
- [x] [LOW] æ·»åŠ  `.editorconfig` æ–‡ä»¶æ”¯æŒé VSCode ç¼–è¾‘å™¨

### Dev Agent Response

æ‰€æœ‰é—®é¢˜å·²åœ¨ä»£ç å®¡æŸ¥æœŸé—´è‡ªåŠ¨ä¿®å¤ã€‚éªŒè¯ç»“æœï¼š

```bash
$ npm run lint     # é€šè¿‡ - æ—  ESLintIgnoreWarning
$ npm run format:check  # é€šè¿‡
$ npm run type-check    # é€šè¿‡
$ git status --porcelain
 M .gitignore
 M .vscode/settings.json
?? .editorconfig
# .vscode æ–‡ä»¶ç°åœ¨å¯ä»¥è¢«è·Ÿè¸ªï¼
```
